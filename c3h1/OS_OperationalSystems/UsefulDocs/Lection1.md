# Свопинг. Стратегии свопинга

## Основные сведения
- Свопинг связан с обменом информации между оперативной и постоянной памятью.
- Чем интенсивнее проходит свопинг, тем больше нагружается система.
- Файловая система непосредственно занимается обменом.

Свопинг сводитсяк выполнении процедур:
- подкачки (нужного сегмента, страницы)
- откачки (ненужного сегмента, страницы)

## Стратегия подкачки

### Опережающая подкачка
- Заранее можно знать какие страницы и сегменты нужно загружать в оперативную память
- Преполагалась уменьшить интенсивность свопинга, тем самым эффективность работы системы 
- Не прижилась, т.к. поведение программ оказалось непредсказуемым при разных исходных данных

### Подкачка по требованию
- Работает только с определенным кандиадатом на откачку

**Понятие**
> **Кандидатом на откачку** является тот сегмент, обращение к котормоу будет нескоро

Разновидности подкачи по требованию:
- *Случайная откачка* (Случайно выбирается ненужный сегмент). Отличается простой реализацией и плохим качеством работы отн. др. стратегий
- *FIFO* (First In First Out) - дословно "первым подкачен, первым откачен". Отличается простой реализацией и плохим качеством работы отн. др. стратегий
- *LRU* (Least Recently Used) - дословно "Самый давний в использованнии". Откачивается самый давний элемент, который не был использован. Отличается средним качеством работы отн. др. стратегий
- *LFU* (Least Frequently Used) - дословно "Самый редкий в использовании". Является обобщающим случаем. 

Пример исключения LFU
> К недавне загруженной программе обращались довольно редко, поэтому, LFU может решить ее откачать

## Сегментно-страничная организация памяти
- Транслятор подгатавливает задачу в виде совокупности виртуальных сегментов разного размера 
- Каждый сегмент состоит из виртуальных страниц одинакового размера
- Адресация внутри страниц носит непрерывный характер
- Для каждой задачи сегмента создает дескриптор сегмента
- Для каждой задачи страницы создает дескриптор страницы

Этапы
1. Транслятор
2. ОС + Аппаратура

Регистр ? - Дескриптор текущей выполняемой задачи

Фотография из телефона 1

Таблица дескрипторов сегментов задачи
* A - начальный адрес 
* L - размер (в страницах)

Таблица дескрипторов страниц сегмента
* Pr - признак присутствия в оперативной памяти
* F - физический номер страницы

Три обращения в памяти - долго. Поэтому для ускорения процесса в сегментно-страничной организации памяти используется КЭШ память

## Ассоциативная память (КЭШ память)

**Понятие**
> **Ассоциативная память** - это память, выборка из которой осцществляется по значению некоторого...

**Важное замечание**
> Адресация внутри страницы носит непрерывный характер.
> Это значит, что все следующие n обращений будут к той же странице.

- КЭШ память по своим размер отн. невелика. Из-за этого следует, что требуется решать задачу замещения ненужных страниц.
- Задача замещения ненужных страниц реализуется через стратегию LFU

# ... параллельных процессов

Пример 1
> Процесс 1: 
> ``` R1 = X; R1 = R1 + 1; X = R1; ```
> Процесс 2: 
> ``` R1 = X; R1 = R1 + 1; X = R1; ```
> ...

Пример 3
> Поставщик-Потребитель
> - Сущ. 2 процесса : Поставщик и Потребитель
> - Поставщик отправляет сообщения в pull-буфера
> - Потребитель считывает сообезния с pull-буферов
> - *Параллельная запись и чтение запрещается*
> - Процессы Поставщик и Потребитель должны просмтаривать количество свободных и занятых pull-буферов

**Понятие**
> **Критическая секция (интервал)** - это комплекс действий, связанный с критическим ресурсом

**Понятие**
> **Задача взаимного исключения**

Положения задачи взаимного исключения:
1. В любой момент времени только один процесс может находиться в одной секции
2. Не один процесс не должен находиться в одной секции бесконечно долго
3. Не один из процессов не должен бесконечно долго ждать входа в свою секцию

В составе различных вычислительных систем существует команда TS (TAS) - дословно "проверить и установить"
- Это неделимая команда (непрерываемая)
- Это двух-операндная команда

# Семафорные примитивы Дейкстры. Решение задач взаимного исключения